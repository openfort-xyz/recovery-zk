// SPDX-License-Identifier: MIT

pragma solidity ^0.8.29;

import "lib/forge-std/src/StdJson.sol";
import { RecoveryManager } from "contracts/recovery/RecoveryManager.sol";
import { Script, console2 as console } from "lib/forge-std/src/Script.sol";

contract DeployRecoveryManager is Script {
    address constant RECOVERY_MANAGER = 0x19bA566256D026fee820F89Eb2324F2945295B61;
    address private CREATE2_DEPLOYER = 0x4e59b44847b379578588920cA78FbF26c0B4956C;

    function run() public {
        vm.startBroadcast();
        bytes memory data =
            hex"000000000000000000000000000000000000000000000000000000017885423a6080604052348015600e575f5ffd5b505f805460ff19166001179055612610806100285f395ff3fe608060405234801561000f575f5ffd5b50600436106100e4575f3560e01c806301257e64146100e85780630b2c20fe146100fd5780630ba234d61461011057806320c5a3e1146101185780632b6ae8e414610120578063323f73fc1461015057806342cde4e8146101825780634cc499d714610199578063521eb273146101b957806354387ad7146101d05780637909e08c146101d85780637b0ca880146101f1578063a5d2fe4214610204578063aa55e16f14610217578063affed0e014610221578063c045e4241461022a578063c244a7b914610232578063f3f480d914610245575b5f5ffd5b6100fb6100f6366004611a3d565b61024e565b005b6100fb61010b366004611ac6565b610351565b6100fb61084f565b6100fb610971565b600554610133906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61017261015e366004611b38565b5f908152600c602052604090205460ff1690565b6040519015158152602001610147565b61018b60015481565b604051908152602001610147565b6101ac6101a7366004611b38565b610c3d565b6040516101479190611b63565b5f546101339061010090046001600160a01b031681565b60045461018b565b6101e0610ce4565b604051610147959493929190611c43565b600654610133906001600160a01b031681565b6100fb610212366004611c9c565b610e88565b6007541515610172565b61018b60035481565b6100fb610f84565b6100fb610240366004611d25565b610fd0565b61018b60025481565b5f60019054906101000a90046001600160a01b03166001600160a01b0316638da5cb5b6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561029e573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102c29190611d6c565b6001600160a01b0316336001600160a01b0316146102f2576040516282b42960e81b815260040160405180910390fd5b60038054905f61030183611da2565b919050555061031284848484611209565b5f80546040516101009091046001600160a01b0316917fcb30bd9a6f4bb2b9b4edefa95db8678f53d3496bc8e020ca8ede7d585533291191a250505050565b600754156103725760405163372a886760e11b815260040160405180910390fd5b5f5461010090046001600160a01b031661038f6020860186611dba565b6001600160a01b0316146103b657604051633edae5df60e11b815260040160405180910390fd5b60016103c56020860186611dd5565b6103d3906020810190611dff565b60038111156103e4576103e4611b4f565b60ff16111561040657604051633edae5df60e11b815260040160405180910390fd5b65ffffffffffff61041a6020860186611dd5565b61042b906040810190602001611e38565b65ffffffffffff161461045157604051633edae5df60e11b815260040160405180910390fd5b61045e6020850185611dd5565b61046f906060810190604001611e38565b65ffffffffffff161561049557604051633edae5df60e11b815260040160405180910390fd5b6104a26020850185611dd5565b6104b3906080810190606001611e38565b65ffffffffffff16156104d957604051633edae5df60e11b815260040160405180910390fd5b5f6104e76020860186611dd5565b6104f5906080810190611e53565b6104fe91611e95565b0361051c57604051633edae5df60e11b815260040160405180910390fd5b5f61052a6020860186611dd5565b61053b9060c081019060a001611ec9565b600181111561054c5761054c611b4f565b1461056a57604051633edae5df60e11b815260040160405180910390fd5b60035484604001351461059057604051633edae5df60e11b815260040160405180910390fd5b468460800135146105b457604051633edae5df60e11b815260040160405180910390fd5b306105c560c0860160a08701611dba565b6001600160a01b0316146105ec57604051633edae5df60e11b815260040160405180910390fd5b4284606001351161061057604051631022c88d60e21b815260040160405180910390fd5b60025461061d9042611ee4565b84606001351161064057604051633edae5df60e11b815260040160405180910390fd5b5f61065361064d86611fbc565b306113a5565b6004549091508410610678576040516337c5c3a360e21b815260040160405180910390fd5b5f6004858154811061068c5761068c6120d3565b905f5260205f2090600202016040518060400160405290815f82015f9054906101000a900460ff1660028111156106c5576106c5611b4f565b60028111156106d6576106d6611b4f565b815260200160018201548152505090506106f2818386866113f5565b60078290556107046020870187611dd5565b6008610710828261225c565b5050600b80546001600160401b0360ff60801b0119166001600160401b0360608901351617600160801b1790556020808201515f908152600c825260408120805460ff19166001179055546001600160a01b03610100909104169083907fd8495f0871483730043393e49339a68c10d96370781e707471fee05d29c3e5329061079b908a018a611dd5565b89606001356040516107ae9291906123c6565b60405180910390a38060200151825f5160206125d05f395f51905f5260016040516107db91815260200190565b60405180910390a3600154600b54600160801b900460ff16106108475742600b60086101000a8154816001600160401b0302191690836001600160401b03160217905550815f5160206125f05f395f51905f524260405161083e91815260200190565b60405180910390a25b505050505050565b60075461086f57604051635caa354760e01b815260040160405180910390fd5b5f60019054906101000a90046001600160a01b03166001600160a01b0316638da5cb5b6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156108bf573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108e39190611d6c565b6001600160a01b0316336001600160a01b031614610913576040516282b42960e81b815260040160405180910390fd5b60075461091e611572565b60038054905f61092d83611da2565b90915550505f80546040516101009091046001600160a01b03169183917f6bc59a043c58e5502537b612bd4842f507ac400f658401f33713af2a7c8e78159190a350565b60075461099157604051635caa354760e01b815260040160405180910390fd5b600b54600160401b90046001600160401b03165f036109c3576040516359fa4a9360e01b815260040160405180910390fd5b600254600b546109e39190600160401b90046001600160401b0316611ee4565b421015610a035760405163048c969960e01b815260040160405180910390fd5b600b546001600160401b03164210610a2e57604051631022c88d60e21b815260040160405180910390fd5b6007546040805160c08101909152600880545f929190829060ff166003811115610a5a57610a5a611b4f565b6003811115610a6b57610a6b611b4f565b8152815465ffffffffffff610100820481166020840152600160381b820481166040840152600160681b909104166060820152600182018054608090920191610ab3906120f3565b80601f0160208091040260200160405190810160405280929190818152602001828054610adf906120f3565b8015610b2a5780601f10610b0157610100808354040283529160200191610b2a565b820191905f5260205f20905b815481529060010190602001808311610b0d57829003601f168201915b5050509183525050600282015460209091019060ff166001811115610b5157610b51611b4f565b6001811115610b6257610b62611b4f565b9052509050610b6f611572565b60038054905f610b7e83611da2565b90915550505f54604051630e49d78760e41b81526101009091046001600160a01b03169063e49d787090610bb6908490600401612484565b5f604051808303815f87803b158015610bcd575f5ffd5b505af1158015610bdf573d5f5f3e3d5ffd5b505050505f60019054906101000a90046001600160a01b03166001600160a01b0316827f078ab7f0249818e2b8c6bec65fc99df5f7e068d9856e4ee91deb4c9f51e742e983604051610c319190612484565b60405180910390a35050565b604080518082019091525f80825260208201526004548210610c72576040516337c5c3a360e21b815260040160405180910390fd5b60048281548110610c8557610c856120d3565b905f5260205f2090600202016040518060400160405290815f82015f9054906101000a900460ff166002811115610cbe57610cbe611b4f565b6002811115610ccf57610ccf611b4f565b81526020016001820154815250509050919050565b6040805160c0810182525f808252602082018190529181018290526060808201839052608082015260a08101829052600754600b546040805160c08101909152600880545f94859485949193926001600160401b0380831693600160401b84049091169260ff600160801b90910481169286918391166003811115610d6b57610d6b611b4f565b6003811115610d7c57610d7c611b4f565b8152815465ffffffffffff610100820481166020840152600160381b820481166040840152600160681b909104166060820152600182018054608090920191610dc4906120f3565b80601f0160208091040260200160405190810160405280929190818152602001828054610df0906120f3565b8015610e3b5780601f10610e1257610100808354040283529160200191610e3b565b820191905f5260205f20905b815481529060010190602001808311610e1e57829003601f168201915b5050509183525050600282015460209091019060ff166001811115610e6257610e62611b4f565b6001811115610e7357610e73611b4f565b905250949a9499509197509550935090915050565b5f5460ff1615610eaa5760405162dc149f60e41b815260040160405180910390fd5b6001600160a01b038716610ed1576040516304067c4760e31b815260040160405180910390fd5b6001600160a01b038216610ef85760405163af95484760e01b815260040160405180910390fd5b6001600160a01b038116610f1f576040516301342c0560e01b815260040160405180910390fd5b5f80546001600160a01b03808a16610100026001600160a81b031990921691909117600117909155600580548483166001600160a01b0319918216179091556006805492841692909116919091179055610f7b86868686611209565b50505050505050565b600754610fa457604051635caa354760e01b815260040160405180910390fd5b600b546001600160401b031642101561091357604051633376277360e11b815260040160405180910390fd5b600754610ff057604051635caa354760e01b815260040160405180910390fd5b600b546001600160401b0316421061101b57604051631022c88d60e21b815260040160405180910390fd5b600454831061103d576040516337c5c3a360e21b815260040160405180910390fd5b5f60048481548110611051576110516120d3565b905f5260205f2090600202016040518060400160405290815f82015f9054906101000a900460ff16600281111561108a5761108a611b4f565b600281111561109b5761109b611b4f565b815260019190910154602091820152818101515f908152600c909152604090205490915060ff16156110e05760405163f6b3aa6560e01b815260040160405180910390fd5b6110ee8160075485856113f5565b6020808201515f908152600c90915260409020805460ff19166001179055600b8054600160801b900460ff1690601061112683612496565b91906101000a81548160ff021916908360ff1602179055505080602001516007545f5160206125d05f395f51905f52600b60109054906101000a900460ff1660ff1660405161117791815260200190565b60405180910390a3600b54600160401b90046001600160401b03161580156111ad5750600154600b54600160801b900460ff1610155b156112035742600b60086101000a8154816001600160401b0302191690836001600160401b031602179055506007545f5160206125f05f395f51905f52426040516111fa91815260200190565b60405180910390a25b50505050565b821580611216575060ff83115b156112345760405163d06b96b160e01b815260040160405180910390fd5b81158061124057508282115b1561125e5760405163d06b96b160e01b815260040160405180910390fd5b5f5b838110156113265761129885858381811061127d5761127d6120d3565b90506040020180360381019061129391906124c0565b611606565b6112b55760405163d06b96b160e01b815260040160405180910390fd5b5f5b8181101561131d578585828181106112d1576112d16120d3565b905060400201602001358686848181106112ed576112ed6120d3565b90506040020160200135036113155760405163d06b96b160e01b815260040160405180910390fd5b6001016112b7565b50600101611260565b506007541561133757611337611572565b61134260045f611967565b5f5b83811015611397576004858583818110611360576113606120d3565b83546001810185555f948552602090942060409091029290920192600202909101905061138d8282612517565b5050600101611344565b506001919091556002555050565b5f6113af82611689565b6113b884611772565b60405161190160f01b6020820152602281019290925260428201526062016040516020818303038152906040528051906020012090505b92915050565b5f808551600281111561140a5761140a611b4f565b036114265761141f8560200151858585611800565b905061154d565b60018551600281111561143b5761143b611b4f565b036114b85760055460208601516040516303784b1960e61b81526001600160a01b039092169163de12c6409161147991889088908890600401612550565b602060405180830381865afa158015611494573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061141f9190612579565b6002855160028111156114cd576114cd611b4f565b0361154d5760065460208601516040516303784b1960e61b81526001600160a01b039092169163de12c6409161150b91889088908890600401612550565b602060405180830381865afa158015611526573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061154a9190612579565b90505b8061156b576040516309bde33960e01b815260040160405180910390fd5b5050505050565b5f5b6004548110156115c557600c5f60048381548110611594576115946120d3565b5f91825260208083206001600290930201820154845283019390935260409091019020805460ff1916905501611574565b505f6007819055600880546001600160981b0319168155906115e8600982611988565b50600201805460ff19169055600b80546001600160881b0319169055565b60208101515f9061161857505f919050565b81516002908181111561162d5761162d611b4f565b60ff16111561163d57505f919050565b5f8251600281111561165157611651611b4f565b0361168157611670611664836020015190565b6001600160a01b031690565b82602001511461168157505f919050565b506001919050565b604080518082018252600e81526d536f6369616c5265636f7665727960901b6020918201528151808301835260018152603160f81b9082015281517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f918101919091527fad4b5d7dfa19f68d355e3bb5addbac9b388e8c17194aa70a85619c87e84af9eb918101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201526001600160a01b03821660a08201525f9060c0015b604051602081830303815290604052805190602001209050919050565b5f7f409302c295a3116dc00869180d8a8a7e643b7f8fb24709b1ae9ace0a25848d9e825f01516117a584602001516118b5565b6040808601516060870151608088015160a0890151935161175597969594906020019687526001600160a01b03958616602088015260408701949094526060860192909252608085015260a08401521660c082015260e00190565b5f80808061181085870187612598565b9250925092505f6001888585856040515f8152602001604052604051611852949392919093845260ff9290921660208401526040830152606082015260800190565b6020604051602081039080840390855afa158015611872573d5f5f3e3d5ffd5b5050604051601f1901519150506001600160a01b038116158015906118a85750886001600160a01b0316816001600160a01b0316145b9998505050505050505050565b5f7f4b3ecbd329733a0d81866e09abf4af655d2ca1f11e4ab310f1b569bbf2a3fd56825f015160038111156118ec576118ec611b4f565b8360200151846040015185606001518660800151805190602001208760a00151600181111561191d5761191d611b4f565b60408051602081019890985260ff9687169088015265ffffffffffff94851660608801529284166080870152921660a085015260c08401919091521660e082015261010001611755565b5080545f8255600202905f5260205f209081019061198591906119bf565b50565b508054611994906120f3565b5f825580601f106119a3575050565b601f0160209004905f5260205f209081019061198591906119e2565b5b808211156119de57805460ff191681555f60018201556002016119c0565b5090565b5b808211156119de575f81556001016119e3565b5f5f83601f840112611a06575f5ffd5b5081356001600160401b03811115611a1c575f5ffd5b6020830191508360208260061b8501011115611a36575f5ffd5b9250929050565b5f5f5f5f60608587031215611a50575f5ffd5b84356001600160401b03811115611a65575f5ffd5b611a71878288016119f6565b90989097506020870135966040013595509350505050565b5f5f83601f840112611a99575f5ffd5b5081356001600160401b03811115611aaf575f5ffd5b602083019150836020828501011115611a36575f5ffd5b5f5f5f5f60608587031215611ad9575f5ffd5b84356001600160401b03811115611aee575f5ffd5b850160c08188031215611aff575f5ffd5b93506020850135925060408501356001600160401b03811115611b20575f5ffd5b611b2c87828801611a89565b95989497509550505050565b5f60208284031215611b48575f5ffd5b5035919050565b634e487b7160e01b5f52602160045260245ffd5b8151604082019060038110611b7a57611b7a611b4f565b808352506020830151602083015292915050565b60048110611b9e57611b9e611b4f565b9052565b60028110611b9e57611b9e611b4f565b611bbd828251611b8e565b65ffffffffffff602082015116602083015265ffffffffffff604082015116604083015265ffffffffffff60608201511660608301525f608082015160c0608085015280518060c0860152806020830160e087015e5f60e0828701015260a08401519150611c2e60a0860183611ba2565b601f01601f19169390930160e0019392505050565b85815260a060208201525f611c5b60a0830187611bb2565b604083019590955250606081019290925260809091015292915050565b6001600160a01b0381168114611985575f5ffd5b8035611c9781611c78565b919050565b5f5f5f5f5f5f5f60c0888a031215611cb2575f5ffd5b8735611cbd81611c78565b965060208801356001600160401b03811115611cd7575f5ffd5b611ce38a828b016119f6565b90975095505060408801359350606088013592506080880135611d0581611c78565b915060a0880135611d1581611c78565b8091505092959891949750929550565b5f5f5f60408486031215611d37575f5ffd5b8335925060208401356001600160401b03811115611d53575f5ffd5b611d5f86828701611a89565b9497909650939450505050565b5f60208284031215611d7c575f5ffd5b8151611d8781611c78565b9392505050565b634e487b7160e01b5f52601160045260245ffd5b5f60018201611db357611db3611d8e565b5060010190565b5f60208284031215611dca575f5ffd5b8135611d8781611c78565b5f823560be19833603018112611de9575f5ffd5b9190910192915050565b60048110611985575f5ffd5b5f60208284031215611e0f575f5ffd5b8135611d8781611df3565b65ffffffffffff81168114611985575f5ffd5b8035611c9781611e1a565b5f60208284031215611e48575f5ffd5b8135611d8781611e1a565b5f5f8335601e19843603018112611e68575f5ffd5b8301803591506001600160401b03821115611e81575f5ffd5b602001915036819003821315611a36575f5ffd5b803560208310156113ef575f19602084900360031b1b1692915050565b60028110611985575f5ffd5b8035611c9781611eb2565b5f60208284031215611ed9575f5ffd5b8135611d8781611eb2565b808201808211156113ef576113ef611d8e565b634e487b7160e01b5f52604160045260245ffd5b60405160c081016001600160401b0381118282101715611f2d57611f2d611ef7565b60405290565b5f82601f830112611f42575f5ffd5b81356001600160401b03811115611f5b57611f5b611ef7565b604051601f8201601f19908116603f011681016001600160401b0381118282101715611f8957611f89611ef7565b604052818152838201602001851015611fa0575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f60c08236031215611fcc575f5ffd5b611fd4611f0b565b8235611fdf81611c78565b815260208301356001600160401b03811115611ff9575f5ffd5b830160c036829003121561200b575f5ffd5b612013611f0b565b813561201e81611df3565b8152602082013561202e81611e1a565b6020820152604082013561204181611e1a565b604082015261205260608301611e2d565b606082015260808201356001600160401b0381111561206f575f5ffd5b61207b36828501611f33565b60808301525061208d60a08301611ebe565b60a08281019190915260208401919091526040858101359084015260608086013590840152608085810135908401526120c891508401611c8c565b60a082015292915050565b634e487b7160e01b5f52603260045260245ffd5b5f81356113ef81611e1a565b600181811c9082168061210757607f821691505b60208210810361212557634e487b7160e01b5f52602260045260245ffd5b50919050565b601f82111561216f57805f5260205f20601f840160051c810160208510156121505750805b601f840160051c820191505b8181101561156b575f815560010161215c565b505050565b6001600160401b0383111561218b5761218b611ef7565b61219f8361219983546120f3565b8361212b565b5f601f8411600181146121d0575f85156121b95750838201355b5f19600387901b1c1916600186901b17835561156b565b5f83815260208120601f198716915b828110156121ff57868501358255602094850194600190920191016121df565b508682101561221b575f1960f88860031b161c19848701351681555b505060018560011b0183555050505050565b5f81356113ef81611eb2565b6002821061224957612249611b4f565b60ff1981541660ff831681178255505050565b813561226781611df3565b6004811061227757612277611b4f565b815460ff821691508160ff198216178355602084013561229681611e1a565b66ffffffffffff008160081b168366ffffffffffffff198416171784555050506122ed6122c5604084016120e7565b82805465ffffffffffff60381b191660389290921b65ffffffffffff60381b16919091179055565b6123246122fc606084016120e7565b82805465ffffffffffff60681b191660689290921b65ffffffffffff60681b16919091179055565b6123316080830183611e53565b61233f818360018601612174565b505061235961235060a0840161222d565b60028301612239565b5050565b5f5f8335601e19843603018112612372575f5ffd5b83016020810192503590506001600160401b03811115612390575f5ffd5b803603821315611a36575f5ffd5b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b604081525f83356123d681611df3565b6123e36040840182611b8e565b5060208401356123f281611e1a565b65ffffffffffff166060830152604084013561240d81611e1a565b65ffffffffffff166080830152606084013561242881611e1a565b65ffffffffffff1660a0830152612442608085018561235d565b60c0808501526124576101008501828461239e565b91505061246660a08601611ebe565b61247360e0850182611ba2565b506020929092019290925292915050565b602081525f611d876020830184611bb2565b5f60ff821660ff81036124ab576124ab611d8e565b60010192915050565b60038110611985575f5ffd5b5f60408284031280156124d1575f5ffd5b50604080519081016001600160401b03811182821017156124f4576124f4611ef7565b6040528235612502816124b4565b81526020928301359281019290925250919050565b8135612522816124b4565b6003811061253257612532611b4f565b60ff1982541660ff8216811783555050602082013560018201555050565b848152836020820152606060408201525f61256f60608301848661239e565b9695505050505050565b5f60208284031215612589575f5ffd5b81518015158114611d87575f5ffd5b5f5f5f606084860312156125aa575f5ffd5b833560ff811681146125ba575f5ffd5b9560208501359550604090940135939250505056fe35ad35f40e87012e3690c18d8b1775e450885c64e76e2dd8f609078f297845832271d4821d03486c08ce8855b88a5a182f86cb8eba433a2fcd30f86d0fef1006";

        (bool s, bytes memory r) = CREATE2_DEPLOYER.call{ value: 0 }(data);
        vm.stopBroadcast();

        require(s, "Failed to send TX");
        console.log(vm.toString(r));
        address deployedAddress = address(uint160(bytes20(r)));
        console.log("Deployed to:", deployedAddress);

        require(RECOVERY_MANAGER == deployedAddress, "Not Same Address: 0x19bA566256D026fee820F89Eb2324F2945295B61");

        console.log("Deployment completed successfully!");
    }
}
